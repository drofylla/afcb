<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AFCB</title>
        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <script src="script.js" defer></script>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="container">
            <header>
                <h1>AFCB</h1>
            </header>

            <div class="card-grid" id="contacts-container">
                <!-- Add Contact Card -->
                <div class="card add-card" id="openModalCard">
                    <div class="add-card-content">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        <div class="add-card-text">Add Contact</div>
                    </div>
                </div>

                <!-- Contact List will be loaded here -->
                <div
                    id="contacts-list"
                    hx-get="/contacts"
                    hx-trigger="load"
                    hx-swap="beforeend"
                ></div>
            </div>
        </div>

        <!-- Modal Form -->
        <div id="contactModal" class="modal">
            <div class="modal-content">
                <span class="close" id="closeModalBtn">&times;</span>
                <h2 id="modalTitle">Add Contact</h2>
                <form
                    id="contactForm"
                    hx-post="/contacts"
                    hx-target="#contacts-list"
                    hx-swap="afterbegin"
                    onsubmit="closeModal()"
                >
                    <input type="hidden" name="id" id="contactId" />

                    <select name="ContactType" id="contactType" required>
                        <option value="">-- Select Type --</option>
                        <option value="Friend">Friend</option>
                        <option value="Family">Family</option>
                        <option value="Work">Work</option>
                    </select>
                    <input
                        id="firstName"
                        name="FirstName"
                        placeholder="First Name"
                        required
                    />
                    <input
                        id="lastName"
                        name="LastName"
                        placeholder="Last Name"
                        required
                    />
                    <input
                        id="email"
                        name="Email"
                        placeholder="Email"
                        required
                    />
                    <input
                        id="phone"
                        name="Phone"
                        placeholder="Phone"
                        required
                    />
                    <button type="submit">Save</button>
                </form>
            </div>
        </div>
    </body>
</html>
